---
export interface Props {
  variant?: 'primary' | 'secondary' | 'tertiary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  href?: string;
  target?: '_blank' | '_self' | '_parent' | '_top';
  rel?: string;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
  fullWidth?: boolean;
  icon?: 'calendar' | 'phone' | 'mail' | 'arrow-right' | 'arrow-left' | 'info' | 'external';
  iconPosition?: 'left' | 'right';
  class?: string;
}

const {
  variant = 'primary',
  size = 'md',
  href,
  target,
  rel,
  type = 'button',
  disabled = false,
  fullWidth = false,
  icon,
  iconPosition = 'left',
  class: className = '',
} = Astro.props;

// Base styles
const baseStyles = 'inline-flex items-center justify-center gap-3 font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2';

// Variant styles
const variantStyles = {
  primary: 'bg-sage-600 text-white hover:bg-sage-700 hover:scale-105 shadow-lg hover:shadow-xl focus:ring-sage-500 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:hover:scale-100',
  secondary: 'bg-earth-orange text-white hover:bg-earth-terracotta hover:scale-105 shadow-lg hover:shadow-xl focus:ring-earth-orange disabled:bg-gray-400 disabled:cursor-not-allowed disabled:hover:scale-100',
  tertiary: 'bg-white text-sage-700 hover:bg-sage-50 border-2 border-sage-300 hover:border-sage-600 focus:ring-sage-500 disabled:bg-gray-100 disabled:text-gray-400 disabled:border-gray-300 disabled:cursor-not-allowed',
  outline: 'bg-transparent border-2 border-white text-white hover:bg-white/10 focus:ring-white disabled:border-gray-400 disabled:text-gray-400 disabled:cursor-not-allowed disabled:hover:bg-transparent',
};

// Size styles
const sizeStyles = {
  sm: 'px-4 py-2 text-sm rounded-[var(--radius-button)]',
  md: 'px-6 py-3 text-base rounded-[var(--radius-button)]',
  lg: 'px-8 py-4 text-lg rounded-[var(--radius-button)]',
};

// Width styles
const widthStyles = fullWidth ? 'w-full' : '';

// Combined classes
const combinedClasses = `${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${widthStyles} ${className}`;

// Icon paths
const iconPaths = {
  calendar: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z',
  phone: 'M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z',
  mail: 'M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z',
  'arrow-right': 'M17 8l4 4m0 0l-4 4m4-4H3',
  'arrow-left': 'M7 16l-4-4m0 0l4-4m-4 4h18',
  info: 'M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
  external: 'M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14',
};

const iconSize = size === 'lg' ? 'w-6 h-6' : size === 'sm' ? 'w-4 h-4' : 'w-5 h-5';
const iconPath = icon ? iconPaths[icon] : null;
---

{href ? (
  <a href={href} target={target} rel={rel} class={combinedClasses}>
    {icon && iconPosition === 'left' && (
      <svg class={iconSize} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={iconPath}></path>
      </svg>
    )}
    <slot />
    {icon && iconPosition === 'right' && (
      <svg class={iconSize} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={iconPath}></path>
      </svg>
    )}
  </a>
) : (
  <button type={type} disabled={disabled} class={combinedClasses}>
    {icon && iconPosition === 'left' && (
      <svg class={iconSize} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={iconPath}></path>
      </svg>
    )}
    <slot />
    {icon && iconPosition === 'right' && (
      <svg class={iconSize} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={iconPath}></path>
      </svg>
    )}
  </button>
)}
